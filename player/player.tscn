[gd_scene load_steps=26 format=3 uid="uid://b8m6yl4vxq41k"]

[ext_resource type="Script" path="res://player/player.gd" id="1_5otab"]
[ext_resource type="Texture2D" uid="uid://dt00pmay67o0d" path="res://assets/white-16x16.png" id="1_7evac"]
[ext_resource type="Texture2D" uid="uid://2jc1ykavq7ro" path="res://assets/generated-sprite.png" id="3_7lr0j"]
[ext_resource type="PackedScene" uid="uid://be0dsd6ctwcst" path="res://player/states/state_machine.tscn" id="3_v4sdo"]
[ext_resource type="PackedScene" uid="uid://ckgwenlkp8pj2" path="res://player/states/ground_state.tscn" id="4_nmp6a"]
[ext_resource type="PackedScene" uid="uid://b6san3hcuu7t8" path="res://player/states/falling_state.tscn" id="5_8beaw"]
[ext_resource type="PackedScene" uid="uid://cddfljqinlj3g" path="res://player/states/boost_state.tscn" id="6_edjx4"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6ngxk"]
size = Vector2(18, 36.875)

[sub_resource type="AtlasTexture" id="AtlasTexture_217ht"]
atlas = ExtResource("3_7lr0j")
region = Rect2(512, 384, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_knvsh"]
atlas = ExtResource("3_7lr0j")
region = Rect2(0, 512, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_v4ee6"]
atlas = ExtResource("3_7lr0j")
region = Rect2(128, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_d1tnd"]
atlas = ExtResource("3_7lr0j")
region = Rect2(384, 256, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_2sytv"]
atlas = ExtResource("3_7lr0j")
region = Rect2(512, 256, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_ao8v8"]
atlas = ExtResource("3_7lr0j")
region = Rect2(0, 256, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_n5xe2"]
atlas = ExtResource("3_7lr0j")
region = Rect2(128, 256, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_x4jo4"]
atlas = ExtResource("3_7lr0j")
region = Rect2(256, 256, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_harjb"]
atlas = ExtResource("3_7lr0j")
region = Rect2(384, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_7rcfw"]
atlas = ExtResource("3_7lr0j")
region = Rect2(512, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_w2jwn"]
atlas = ExtResource("3_7lr0j")
region = Rect2(0, 128, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_03m3g"]
atlas = ExtResource("3_7lr0j")
region = Rect2(128, 128, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_682dn"]
atlas = ExtResource("3_7lr0j")
region = Rect2(256, 128, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_kumsu"]
atlas = ExtResource("3_7lr0j")
region = Rect2(384, 128, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_jhike"]
atlas = ExtResource("3_7lr0j")
region = Rect2(512, 128, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_pnxe8"]
atlas = ExtResource("3_7lr0j")
region = Rect2(0, 256, 128, 128)

[sub_resource type="SpriteFrames" id="SpriteFrames_3tl73"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_217ht")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_knvsh")
}],
"loop": true,
"name": &"boost",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_v4ee6")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_d1tnd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2sytv")
}],
"loop": true,
"name": &"jump_down",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ao8v8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_n5xe2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_x4jo4")
}],
"loop": false,
"name": &"jump_up",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_harjb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7rcfw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w2jwn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_03m3g")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_682dn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kumsu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jhike")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pnxe8")
}],
"loop": true,
"name": &"run",
"speed": 8.0
}]

[node name="Player" type="CharacterBody2D"]
collision_layer = 4
script = ExtResource("1_5otab")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -18.5625)
shape = SubResource("RectangleShape2D_6ngxk")

[node name="BoostIndicator" type="CPUParticles2D" parent="."]
unique_name_in_owner = true
position = Vector2(0, -8)
emitting = false
lifetime = 0.2
spread = 180.0
gravity = Vector2(0, 0)
initial_velocity_min = 50.0
initial_velocity_max = 100.0
scale_amount_min = 4.0
scale_amount_max = 4.0

[node name="BoostEffect" type="CPUParticles2D" parent="."]
unique_name_in_owner = true
position = Vector2(0, -8)
emitting = false
lifetime = 0.2
spread = 180.0
gravity = Vector2(0, 0)
initial_velocity_min = 50.0
initial_velocity_max = 100.0
scale_amount_min = 4.0
scale_amount_max = 4.0
color = Color(0.947865, 0.293211, 0.484936, 1)

[node name="White-16x16" type="Sprite2D" parent="."]
visible = false
position = Vector2(0, -8)
texture = ExtResource("1_7evac")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
position = Vector2(1.42109e-14, -18)
scale = Vector2(0.4, 0.4)
sprite_frames = SubResource("SpriteFrames_3tl73")
animation = &"boost"

[node name="StateMachine" parent="." instance=ExtResource("3_v4sdo")]

[node name="GroundState" parent="StateMachine" node_paths=PackedStringArray("player", "falling_state", "boost_state") instance=ExtResource("4_nmp6a")]
player = NodePath("../..")
falling_state = NodePath("../FallingState")
boost_state = NodePath("../BoostState")

[node name="FallingState" parent="StateMachine" node_paths=PackedStringArray("player", "ground_state", "boost_state") instance=ExtResource("5_8beaw")]
player = NodePath("../..")
ground_state = NodePath("../GroundState")
boost_state = NodePath("../BoostState")

[node name="BoostState" parent="StateMachine" node_paths=PackedStringArray("player", "falling_state", "ground_state") instance=ExtResource("6_edjx4")]
player = NodePath("../..")
falling_state = NodePath("../FallingState")
ground_state = NodePath("../GroundState")

[node name="AlternateLevelDetector" type="Area2D" parent="."]
unique_name_in_owner = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="AlternateLevelDetector"]
position = Vector2(0, -19)
shape = SubResource("RectangleShape2D_6ngxk")

[node name="BoostChargeTimer" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 2.5
one_shot = true

[connection signal="timeout" from="BoostChargeTimer" to="." method="_on_boost_charge_timer_timeout"]
